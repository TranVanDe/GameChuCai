<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Game Ch·ªØ">
    <title>Game Ch·ªØ C√°i</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        * {
            -webkit-user-select: none;
            user-select: none;
        }
        input {
            -webkit-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect, useRef } = React;

const App = () => {
  const vowels = ['A', 'ƒÇ', '√Ç', 'E', '√ä', 'I', 'O', '√î', '∆†', 'U', '∆Ø', 'Y'];
  const consonants = ['B', 'C', 'D', 'ƒê', 'G', 'H', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'X'];

  const [letters, setLetters] = useState([]);
  const [playing, setPlaying] = useState(false);
  const [timerMinutes, setTimerMinutes] = useState(5);
  const [timeLeft, setTimeLeft] = useState(0);
  const [timerRunning, setTimerRunning] = useState(false);
  const audioRef = useRef(null);
  const intervalRef = useRef(null);

  useEffect(() => {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const createBeep = () => {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = 800;
      oscillator.type = 'sine';
      
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.5);
    };
    
    audioRef.current = createBeep;
  }, []);

  useEffect(() => {
    if (timerRunning && timeLeft > 0) {
      intervalRef.current = setInterval(() => {
        setTimeLeft(prev => {
          if (prev <= 1) {
            clearInterval(intervalRef.current);
            setTimerRunning(false);
            for (let i = 0; i < 3; i++) {
              setTimeout(() => audioRef.current(), i * 600);
            }
            return 0;
          }
          return prev - 1;
        });
      }, 1000);
    }
    
    return () => {
      if (intervalRef.current) clearInterval(intervalRef.current);
    };
  }, [timerRunning, timeLeft]);

  const getRandomFromArray = (arr) => {
    return arr[Math.floor(Math.random() * arr.length)];
  };

  const play = () => {
    let letter1, letter2;
    const randomCase = Math.random();
    
    if (randomCase < 0.33) {
      letter1 = getRandomFromArray(consonants);
      letter2 = getRandomFromArray(vowels);
      if (Math.random() < 0.5) {
        [letter1, letter2] = [letter2, letter1];
      }
    } else if (randomCase < 0.66) {
      letter1 = getRandomFromArray(consonants);
      do {
        letter2 = getRandomFromArray(consonants);
      } while (letter2 === letter1);
    } else {
      letter1 = getRandomFromArray(consonants);
      letter2 = letter1;
    }
    
    setLetters([letter1, letter2]);
    setPlaying(true);
    
    if (!timerRunning && timeLeft === 0) {
      if (timeLeft === 0) {
        setTimeLeft(timerMinutes * 60);
      }
      setTimerRunning(true);
    }
  };

  const startTimer = () => {
    if (timeLeft === 0) {
      setTimeLeft(timerMinutes * 60);
    }
    setTimerRunning(true);
  };

  const stopTimer = () => {
    setTimerRunning(false);
    if (intervalRef.current) clearInterval(intervalRef.current);
  };

  const formatTime = (seconds) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 flex items-center justify-center p-4">
      <div className="bg-white rounded-3xl shadow-2xl p-6 w-full max-w-md">
        <h1 className="text-3xl font-bold text-center mb-6 text-gray-800">üéÆ Game Ch·ªØ C√°i</h1>
        
        {playing && (
          <div className="mb-6 bg-gradient-to-r from-yellow-200 to-yellow-300 rounded-2xl p-6">
            <div className="flex justify-center gap-4">
              {letters.map((letter, i) => (
                <div
                  key={i}
                  className="bg-white text-7xl font-bold text-purple-600 rounded-2xl w-28 h-28 flex items-center justify-center shadow-xl"
                >
                  {letter}
                </div>
              ))}
            </div>
          </div>
        )}

        <div className="flex gap-3 justify-center mb-6">
          <button 
            onClick={play} 
            className="bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg px-10 py-4 rounded-full shadow-lg active:scale-95 transition-transform"
          >
            {playing ? 'üîÑ RANDOM L·∫†I' : '‚ñ∂Ô∏è PLAY'}
          </button>
          {playing && (
            <button 
              onClick={() => setPlaying(false)} 
              className="bg-gradient-to-r from-red-500 to-red-600 text-white font-bold text-lg px-8 py-4 rounded-full shadow-lg active:scale-95 transition-transform"
            >
              RESET
            </button>
          )}
        </div>

        <div className="text-center text-gray-600 text-sm mb-6 px-2">
          üí° M·ªói l·∫ßn random s·∫Ω c√≥ <strong>√≠t nh·∫•t 1 ph·ª• √¢m</strong> trong 2 ch·ªØ<br/>
          üîî ƒê·∫∑t ƒë·ªìng h·ªì v√† b·∫Øt ƒë·∫ßu ch∆°i - s·∫Ω c√≥ chu√¥ng b√°o khi h·∫øt gi·ªù!
        </div>

        <div className="bg-gradient-to-r from-indigo-100 to-purple-100 rounded-2xl p-4">
          <div className="flex flex-col gap-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2">
                <span className="text-2xl">‚è∞</span>
                <input 
                  type="number" 
                  min="1" 
                  max="60" 
                  value={timerMinutes}
                  onChange={(e) => setTimerMinutes(Math.max(1, Math.min(60, parseInt(e.target.value) || 1)))}
                  disabled={timerRunning}
                  className="w-14 px-2 py-1 border-2 border-gray-300 rounded-lg text-center font-bold focus:border-purple-500 focus:outline-none"
                />
                <span className="text-gray-700 font-medium text-sm">ph√∫t</span>
              </div>

              <div className={`text-4xl font-bold ${timeLeft <= 10 && timeLeft > 0 ? 'text-red-600 animate-pulse' : 'text-gray-800'}`}>
                {timerRunning || timeLeft > 0 ? formatTime(timeLeft) : '--:--'}
              </div>
            </div>

            <div className="flex gap-2 justify-center">
              {!timerRunning && timeLeft === 0 && (
                <button 
                  onClick={startTimer}
                  className="bg-red-500 text-white font-bold px-8 py-3 rounded-full shadow active:scale-95 transition-transform text-base"
                >
                  ‚èπÔ∏è D·ª´ng
                </button>
              )}
              {timerRunning && (
                <button 
                  onClick={stopTimer}
                  className="bg-yellow-500 text-white font-bold px-8 py-3 rounded-full shadow active:scale-95 transition-transform text-base"
                >
                  ‚è∏Ô∏è T·∫°m d·ª´ng
                </button>
              )}
              {!timerRunning && timeLeft > 0 && (
                <>
                  <button 
                    onClick={startTimer}
                    className="bg-green-500 text-white font-bold px-8 py-3 rounded-full shadow active:scale-95 transition-transform text-base"
                  >
                    ‚ñ∂Ô∏è Ti·∫øp t·ª•c
                  </button>
                  <button 
                    onClick={() => setTimeLeft(0)}
                    className="bg-gray-500 text-white font-bold px-6 py-3 rounded-full shadow active:scale-95 transition-transform text-base"
                  >
                    üîÑ
                  </button>
                </>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
